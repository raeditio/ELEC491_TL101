%YAML:1.0

#--------------------------------------------------------------------------------------------
# Camera Parameters for Monocular Camera with Depth-Anything-V2
#--------------------------------------------------------------------------------------------
File.version: "1.0"

Camera.type: "PinHole"

# Camera calibration parameters from your actual camera calibration
Camera1.fx: 1425.8471166943561
Camera1.fy: 1425.85205707241
Camera1.cx: 995.6116322284139
Camera1.cy: 522.5234623339283

# Distortion parameters from your camera calibration
Camera1.k1: 0.059522962599012165
Camera1.k2: -0.29237963256473987
Camera1.p1: -0.0014999512394913174
Camera1.p2: -0.00026753264456687417
Camera1.k3: 0.38244970605037076

# Camera resolution (update based on your calibration - appears to be higher resolution)
# Your cx/cy values suggest resolution around 1920x1080 or similar
Camera.width: 1920
Camera.height: 1080

# Camera frames per second 
Camera.fps: 30

# Color order of the images (0: BGR, 1: RGB)
Camera.RGB: 1

# Stereo/Depth parameters
Stereo.ThDepth: 40.0
Stereo.b: 0.0  # Not used for monocular setup

# Depth map values factor for Depth-Anything-V2
# Depth-Anything-V2 typically outputs normalized depth [0,1] or metric depth
# Adjust this factor based on your Depth-Anything-V2 output format
RGBD.DepthMapFactor: 1000.0  # If depth is in meters, use 1000 to convert to mm
                             # If depth is normalized [0,1], you may need a different factor

#--------------------------------------------------------------------------------------------
# IMU Parameters (Adjust for your specific IMU!)
#--------------------------------------------------------------------------------------------

# Transformation from body-frame (IMU) to camera frame
# This is CRITICAL - you must determine this transformation for your setup
# Example assumes IMU and camera are roughly aligned (identity transformation)
# You need to measure/calibrate this for your actual hardware setup
IMU.T_b_c1: !!opencv-matrix
   rows: 4
   cols: 4
   dt: f
   data: [1.0, 0.0, 0.0, 0.0,
          0.0, 1.0, 0.0, 0.0,
          0.0, 0.0, 1.0, 0.0,
          0.0, 0.0, 0.0, 1.0]

# IMU noise parameters (adjust based on your IMU specifications)
# These values are estimates - check your IMU datasheet for actual noise characteristics
IMU.NoiseGyro: 1e-3    # Gyroscope noise (rad/s^0.5)
IMU.NoiseAcc: 1e-2     # Accelerometer noise (m/s^1.5)
IMU.GyroWalk: 1e-6     # Gyroscope random walk (rad/s^1.5)
IMU.AccWalk: 1e-4      # Accelerometer random walk (m/s^2.5)
IMU.Frequency: 200.0   # IMU frequency in Hz (adjust to your IMU's rate)

# Do not insert keyframes when recently lost
IMU.InsertKFsWhenLost: 0

#--------------------------------------------------------------------------------------------
# ORB Feature Extraction Parameters
#--------------------------------------------------------------------------------------------
# ORB Extractor: Number of features per image
ORBextractor.nFeatures: 1250

# ORB Extractor: Scale factor between levels in the scale pyramid 	
ORBextractor.scaleFactor: 1.2

# ORB Extractor: Number of levels in the scale pyramid	
ORBextractor.nLevels: 8

# ORB Extractor: Fast threshold
# Adjust these if your camera images have different contrast characteristics
ORBextractor.iniThFAST: 20
ORBextractor.minThFAST: 7

#--------------------------------------------------------------------------------------------
# Viewer Parameters
#--------------------------------------------------------------------------------------------
Viewer.KeyFrameSize: 0.05
Viewer.KeyFrameLineWidth: 1.0
Viewer.GraphLineWidth: 0.9
Viewer.PointSize: 2.0
Viewer.CameraSize: 0.08
Viewer.CameraLineWidth: 3.0
Viewer.ViewpointX: 0.0
Viewer.ViewpointY: -0.7
Viewer.ViewpointZ: -3.5
Viewer.ViewpointF: 500.0

#--------------------------------------------------------------------------------------------
# Depth-Anything-V2 Specific Parameters
#--------------------------------------------------------------------------------------------
# These parameters may need adjustment based on Depth-Anything-V2 characteristics

# Depth quality threshold (filter out unreliable depth estimates)
RGBD.DepthThreshold: 0.1  # Minimum depth value to consider valid

# Maximum depth for processing (Depth-Anything-V2 may have effective range limits)
RGBD.MaxDepth: 10.0  # Maximum depth in meters to consider

# Minimum depth for processing
RGBD.MinDepth: 0.1   # Minimum depth in meters to consider